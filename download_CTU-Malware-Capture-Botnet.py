import requests
import re
import os
import sys

url = "https://mcfp.felk.cvut.cz/publicDatasets"

content = requests.get(url, verify = False).text
path = "./"

if "<title>Index of" in content:
    sub_url = re.findall('href="(CTU-Malware-Capture-Botnet.*?)"', content)
    # print(sub_url)
    print(len(sub_url))
    for i in sub_url[:3]:
        if "/" in i:
            i = i.split("/")[0]
            print(i)
            if i != "." and i != "..":
                # if not os.path.isdir(path + i):
                #     os.mkdir(path + i)
                # get_dir(url + "/" + i, path + i + "/")
                print("URL    " + url + "/" + i)
                sub_content = requests.get(url + "/" + i, verify = False).text
                sub_content_urls = re.findall('href="(.*?)"', sub_content)
                print(sub_content_urls)
                for j in sub_content_urls:
                    if "publicDatasets" not in j:
                        if "/" in j:
                            j = j.split("/")[0]
                            print("DIR:" + url + "/" + i  + "/" + j)
                        elif "?C=" not in j:
                            print("FILE:" + url + "/" + i  + "/" + j)
                print("\n\n")



# if __name__ == "__main__":

